# This references a standard debian container from the
# Docker Hub https://registry.hub.docker.com/_/debian/
# Read more about containers on our dev center
# http://devcenter.wercker.com/docs/containers/index.html
box: webgpu/pandoc
build:
  # Steps make up the actions in your pipeline
  # Read more about steps on our dev center:
  # http://devcenter.wercker.com/docs/steps/index.html
  install-packages:
    packages: golang cmake
  steps:
    - script:
      name: get golang packages
      code: |
        go get github.com/k0kubun/pp

# The steps that will be executed in the deploy pipeline
deploy:
  after-steps:
    - slack-notifier:
      url: $SLACK_URL
      channel: notifications
      username: dakkak
  steps:
    # Execute the s3sync deploy step, a step provided by wercker
    - s3sync:
      key_id: $AWS_ACCESS_KEY_ID
      key_secret: $AWS_SECRET_ACCESS_KEY
      bucket_url: $AWS_BUCKET_URL
      source_dir: build/
